<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D.M Cyber Varanasi - Official</title>
    
    <!-- Firebase Libraries (Live Updates ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§∞‡•Ç‡§∞‡•Ä) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --dark-blue: #004a99; --orange: #ff9900; --white: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f0f2f5; padding-bottom: 80px; }
        
        /* ‡§π‡•á‡§°‡§∞ ‡§î‡§∞ ‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§∂‡§® */
        header { background: var(--dark-blue); color: white; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .marquee { background: red; color: white; padding: 8px; font-weight: bold; white-space: nowrap; overflow: hidden; }
        
        /* ‡§ó‡•ç‡§∞‡§ø‡§° ‡§≤‡•á‡§Ü‡§â‡§ü */
        .container { padding: 15px; max-width: 1200px; margin: auto; }
        h2 { color: var(--dark-blue); border-bottom: 2px solid var(--orange); display: inline-block; padding-bottom: 5px; }
        
        .grid-5 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        
        /* ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∞‡§ø‡§∏‡•ç‡§™‡•â‡§®‡•ç‡§∏‡§ø‡§µ */
        @media (max-width: 768px) {
            .grid-5 { grid-template-columns: repeat(2, 1fr); }
            .grid-3 { grid-template-columns: 1fr; }
        }

        /* ‡§ï‡§æ‡§∞‡•ç‡§° ‡§°‡§ø‡§ú‡§æ‡§á‡§® */
        .card { background: white; padding: 20px; text-align: center; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: relative; transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .card h3 { margin: 10px 0; font-size: 18px; color: #333; }
        .price-tag { color: green; font-weight: bold; font-size: 14px; }
        .del-btn { position: absolute; top: -10px; right: -10px; background: red; color: white; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; display: none; font-weight: bold; }
        
        /* ‡§è‡§°‡§Æ‡§ø‡§® ‡§î‡§∞ ‡§Æ‡•ã‡§°‡§≤ */
        .admin-btn { position: fixed; bottom: 90px; left: 20px; background: #333; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); font-size: 24px; z-index: 1000; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; z-index: 2000; }
        .modal-content { background: white; padding: 25px; border-radius: 12px; width: 300px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        
        /* AI Chat 2.0 */
        .chat-toggle { position: fixed; bottom: 20px; right: 20px; background: var(--orange); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; cursor: pointer; box-shadow: 0 4px 15px rgba(255,153,0,0.4); z-index: 1000; transition: transform 0.3s; }
        .chat-toggle:hover { transform: scale(1.1); }
        
        .chat-box { position: fixed; bottom: 90px; right: 20px; width: 320px; height: 400px; background: white; border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.2); display: none; flex-direction: column; overflow: hidden; z-index: 999; }
        .chat-header { background: var(--dark-blue); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; }
        .chat-msgs { flex: 1; padding: 15px; overflow-y: auto; background: #f9f9f9; }
        .msg { margin: 8px 0; padding: 8px 12px; border-radius: 15px; max-width: 80%; font-size: 14px; }
        .bot { background: #e0e0e0; color: black; align-self: flex-start; border-bottom-left-radius: 2px; }
        .user { background: var(--dark-blue); color: white; align-self: flex-end; margin-left: auto; border-bottom-right-radius: 2px; }
        .chat-input-area { display: flex; padding: 10px; border-top: 1px solid #eee; }
        .chat-input-area input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none; }
        .chat-input-area button { background: var(--orange); border: none; color: white; padding: 0 15px; margin-left: 5px; border-radius: 50%; cursor: pointer; }
    </style>
</head>
<body>

<!-- ‡§®‡•ç‡§Ø‡•Ç‡•õ ‡§™‡§ü‡•ç‡§ü‡•Ä -->
<div class="marquee" id="news-ticker">Loading updates...</div>

<header>
    <h1>D.M Cyber Varanasi</h1>
    <p>‡§ú‡§® ‡§∏‡•á‡§µ‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ & ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡•â‡§≤‡•ç‡§Ø‡•Ç‡§∂‡§®</p>
</header>

<div class="container">
    <h2>‚≠ê ‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Å & ‡§∞‡•á‡§ü</h2>
    <div id="services-area" class="grid-5">Loading services...</div>

    <h2>üìù ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ</h2>
    <div id="forms-area" class="grid-3">Loading forms...</div>
</div>

<!-- ‡§è‡§°‡§Æ‡§ø‡§® ‡§¨‡§ü‡§® -->
<div class="admin-btn" onclick="openAdmin()" title="Admin Login">‚öôÔ∏è</div>

<!-- ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•ã‡§°‡§≤ -->
<div id="login-modal" class="modal">
    <div class="modal-content">
        <h3>Admin Access</h3>
        <input type="password" id="admin-pass" placeholder="PIN (2525)" style="padding: 10px; width: 80%; border: 1px solid #ccc; border-radius: 5px;">
        <br><br>
        <button onclick="checkLogin()" style="padding: 10px 20px; background: green; color: white; border: none; border-radius: 5px; cursor: pointer;">Login</button>
        <button onclick="closeModal('login-modal')" style="padding: 10px 20px; background: red; color: white; border: none; border-radius: 5px; cursor: pointer;">Close</button>
    </div>
</div>

<!-- AI Chat Interface -->
<div class="chat-toggle" onclick="toggleChat()">ü§ñ</div>
<div class="chat-box" id="chat-box">
    <div class="chat-header">
        <span>DM Cyber Assistant</span>
        <span style="cursor:pointer;" onclick="toggleChat()">‚úñ</span>
    </div>
    <div class="chat-msgs" id="chat-msgs">
        <div class="msg bot">‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç AI ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§∞‡•á‡§ü ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§î‡§∞ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§ ‡§™‡•Ç‡§õ‡§ø‡§è?</div>
    </div>
    <div class="chat-input-area">
        <input type="text" id="user-msg" placeholder="Type here..." onkeypress="handleEnter(event)">
        <button onclick="sendMsg()">‚û§</button>
    </div>
</div>

<script>
    // ---------------------------------------------------------
    //  STEP: ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ FIREBASE CONFIG ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
    // ---------------------------------------------------------
    const firebaseConfig = {
        // ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ config ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç ‡§ú‡•ã Firebase ‡§∏‡•á ‡§Æ‡§ø‡§≤‡§æ ‡§π‡•à
        // ‡§â‡§¶‡§æ‡§π‡§∞‡§£:
        // apiKey: "AIzaSyD...",
        // authDomain: "dm-cyber.firebaseapp.com",
        // databaseURL: "https://dm-cyber-default-rtdb.firebaseio.com",
        // projectId: "dm-cyber",
    };

    // Firebase ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤‡§æ‡§á‡•õ ‡§ï‡§∞‡•á‡§Ç (‡§Ö‡§ó‡§∞ config ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à ‡§§‡•ã ‡§≤‡•ã‡§ï‡§≤ ‡§Æ‡•ã‡§° ‡§ö‡§≤‡•á‡§ó‡§æ)
    let db;
    let useFirebase = false;
    
    try {
        if (firebaseConfig.apiKey) {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
            useFirebase = true;
            console.log("Connected to Global Database");
        } else {
            console.log("Firebase config missing. Using Local Mode.");
        }
    } catch (e) { console.error("Firebase Error:", e); }

    // --- ‡§°‡•á‡§ü‡§æ ‡§Æ‡•à‡§®‡•á‡§ú‡§Æ‡•á‡§®‡•ç‡§ü ---
    let localData = JSON.parse(localStorage.getItem('dm_data')) || {
        services: [{name:'Pan Card', price:'200'}, {name:'Income Cert', price:'100'}, {name:'Caste Cert', price:'100'}],
        forms: [{name:'UP Police', desc:'Bharti Open'}, {name:'SSC GD', desc:'Last Date 31st'}],
        news: 'D.M Cyber ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!'
    };
    
    let currentData = localData; // ‡§Ø‡§π ‡§µ‡•ã ‡§°‡•á‡§ü‡§æ ‡§π‡•à ‡§ú‡•ã ‡§Ö‡§≠‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§π‡•à
    let isAdmin = false;

    // --- ‡§°‡•á‡§ü‡§æ ‡§≤‡§æ‡§®‡§æ (Sync) ---
    function syncData() {
        if(useFirebase) {
            // ‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§≤‡§æ‡§ì
            db.ref('siteData').on('value', (snapshot) => {
                const val = snapshot.val();
                if(val) {
                    currentData = val;
                    render();
                } else {
                    // ‡§Ö‡§ó‡§∞ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à, ‡§§‡•ã ‡§≤‡•ã‡§ï‡§≤ ‡§°‡•á‡§ü‡§æ ‡§≠‡•á‡§ú ‡§¶‡•ã
                    saveData();
                }
            });
        } else {
            // ‡§≤‡•ã‡§ï‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§∏‡•á ‡§ö‡§≤‡§æ‡§ì
            render();
        }
    }

    // --- ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ (Render) ---
    function render() {
        // ‡§®‡•ç‡§Ø‡•Ç‡•õ
        document.getElementById('news-ticker').innerText = currentData.news;
        
        // ‡§∏‡•á‡§µ‡§æ‡§è‡§Å
        const sArea = document.getElementById('services-area');
        sArea.innerHTML = '';
        (currentData.services || []).forEach((item, index) => {
            sArea.innerHTML += `
                <div class="card">
                    <h3>${item.name}</h3>
                    <div class="price-tag">‚Çπ${item.price}</div>
                    ${isAdmin ? `<button class="del-btn" style="display:block" onclick="deleteItem('services', ${index})">X</button>` : ''}
                </div>`;
        });
        if(isAdmin) sArea.innerHTML += `<div class="card" onclick="addItem('services')" style="background:#e9ecef; cursor:pointer; display:flex; align-items:center; justify-content:center; color:#007bff; font-weight:bold; font-size:40px;">+</div>`;

        // ‡§´‡•â‡§∞‡•ç‡§Æ
        const fArea = document.getElementById('forms-area');
        fArea.innerHTML = '';
        (currentData.forms || []).forEach((item, index) => {
            fArea.innerHTML += `
                <div class="card" style="border-left: 5px solid var(--orange);">
                    <h3>${item.name}</h3>
                    <small>${item.desc || 'Available'}</small>
                    ${isAdmin ? `<button class="del-btn" style="display:block" onclick="deleteItem('forms', ${index})">X</button>` : ''}
                </div>`;
        });
        if(isAdmin) fArea.innerHTML += `<div class="card" onclick="addItem('forms')" style="background:#e9ecef; cursor:pointer; display:flex; align-items:center; justify-content:center; color:var(--orange); font-weight:bold; font-size:40px;">+</div>`;
    }

    // --- ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡§æ ---
    function saveData() {
        if(useFirebase) {
            db.ref('siteData').set(currentData);
        } else {
            localStorage.setItem('dm_data', JSON.stringify(currentData));
            render();
        }
    }

    // --- ‡§è‡§°‡§Æ‡§ø‡§® ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®‡•ç‡§∏ ---
    function openAdmin() { document.getElementById('login-modal').style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    
    function checkLogin() {
        if(document.getElementById('admin-pass').value === '2525') {
            isAdmin = true;
            alert("Admin Mode ON - ‡§Ö‡§¨ ‡§Ü‡§™ Changes ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç (Global Update)");
            closeModal('login-modal');
            render();
            
            // ‡§®‡•ç‡§Ø‡•Ç‡•õ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§Ü‡§™‡•ç‡§∂‡§® ‡§¶‡•á‡§Ç
            const newNews = prompt("Update News Ticker:", currentData.news);
            if(newNews) { currentData.news = newNews; saveData(); }
        } else { alert("‡§ó‡§≤‡§§ ‡§™‡§ø‡§®!"); }
    }

    function addItem(type) {
        if(type === 'services') {
            const name = prompt("Service Name (Ex: Pan Card):");
            const price = prompt("Price (Ex: 200):");
            if(name && price) {
                if(!currentData.services) currentData.services = [];
                currentData.services.push({name, price});
                saveData();
            }
        } else {
            const name = prompt("Form Name (Ex: UP Police):");
            const desc = prompt("Short Detail (Ex: Last Date 20th):");
            if(name) {
                if(!currentData.forms) currentData.forms = [];
                currentData.forms.push({name, desc});
                saveData();
            }
        }
    }

    function deleteItem(type, index) {
        if(confirm("Delete this? This will update everywhere.")) {
            currentData[type].splice(index, 1);
            saveData();
        }
    }

    // --- AI 2.0 Logic (Advanced Fuzzy Search) ---
    function toggleChat() {
        const b = document.getElementById('chat-box');
        b.style.display = b.style.display === 'flex' ? 'none' : 'flex';
    }
    
    function handleEnter(e) { if(e.key === 'Enter') sendMsg(); }

    function sendMsg() {
        const input = document.getElementById('user-msg');
        const txt = input.value.toLowerCase().trim();
        if(!txt) return;

        const chat = document.getElementById('chat-msgs');
        chat.innerHTML += `<div class="msg user">${input.value}</div>`;
        
        // AI Thinking Process
        let reply = "‡§Æ‡§æ‡•û ‡§ï‡•Ä‡§ú‡§ø‡§Ø‡•á, ‡§Æ‡•Å‡§ù‡•á ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ‡•§ ‡§¶‡•Å‡§ï‡§æ‡§® ‡§™‡§∞ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§";
        
        // 1. Check Services (Dynamic Rate Check)
        // ‡§Ø‡§π ‡§≤‡•Ç‡§™ ‡§ö‡§≤‡§æ‡§ï‡§∞ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§ó‡§æ ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§®‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡§æ ‡§π‡•à
        // ‡§ö‡§æ‡§π‡•á ‡§∏‡•ç‡§™‡•á‡§≤‡§ø‡§Ç‡§ó ‡§•‡•ã‡•ú‡•Ä ‡§ó‡§≤‡§§ ‡§≠‡•Ä ‡§π‡•ã (‡§ú‡•à‡§∏‡•á 'pen' -> 'pan')
        let foundService = (currentData.services || []).find(s => txt.includes(s.name.toLowerCase()) || (txt.includes('pan') && s.name.toLowerCase().includes('pan')) || (txt.includes('adhar') && s.name.toLowerCase().includes('adhaar')));
        
        if (foundService) {
            reply = `‡§ú‡•Ä, ${foundService.name} ‡§ï‡§æ ‡§ö‡§æ‡§∞‡•ç‡§ú ‚Çπ${foundService.price} ‡§π‡•à‡•§`;
        }
        // 2. Check Forms
        else if (currentData.forms && currentData.forms.some(f => txt.includes(f.name.toLowerCase()))) {
            let form = currentData.forms.find(f => txt.includes(f.name.toLowerCase()));
            reply = `‡§π‡§æ‡§Å, ${form.name} ‡§ï‡§æ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§≠‡§∞‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ (${form.desc})`;
        }
        // 3. General Questions (Fuzzy Logic)
        else if (txt.includes('time') || txt.includes('kab') || txt.includes('open')) {
            reply = "‡§¶‡•Å‡§ï‡§æ‡§® ‡§∏‡•Å‡§¨‡§π 10 ‡§¨‡§ú‡•á ‡§ñ‡•Å‡§≤‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§∞‡§æ‡§§ 8 ‡§¨‡§ú‡•á ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§";
        }
        else if (txt.includes('hello') || txt.includes('hi') || txt.includes('namaste')) {
            reply = "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! D.M Cyber ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à‡•§ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Ø‡§æ ‡§∞‡•á‡§ü ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§";
        }
        else if (txt.includes('number') || txt.includes('call') || txt.includes('sampark')) {
            reply = "‡§π‡§Æ‡§æ‡§∞‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡•á ‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞ ‡§≤‡§ø‡§ñ‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§π‡§æ‡§Å ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§";
        }

        // Reply ‡§≠‡•á‡§ú‡•á‡§Ç
        setTimeout(() => {
            chat.innerHTML += `<div class="msg bot">${reply}</div>`;
            chat.scrollTop = chat.scrollHeight;
        }, 500);

        input.value = '';
    }

    // Start App
    syncData();

</script>
</body>
</html>
