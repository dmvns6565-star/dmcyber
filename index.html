<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D.M Cyber Varanasi - Master Setup</title>
    <style>
        :root {
            --orange: #ff7b00; --blue: #004a99; --dark: #001c3d;
            --bg: #f4f7f6; --txt: #1a1a1a; --card: #ffffff;
        }
        [data-theme="dark"] {
            --bg: #0f172a; --txt: #ffffff; --card: #1e293b; --blue: #3b82f6;
        }

        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: var(--bg); color: var(--txt); transition: 0.3s; }

        /* HEADER */
        header { 
            background: linear-gradient(180deg, var(--blue), var(--dark)); 
            color: white; text-align: center; padding: 50px 10px 100px; position: relative;
            border-bottom: 8px solid var(--orange);
        }
        .logo-circle { 
            width: 110px; height: 110px; background: white; border-radius: 50%; 
            margin: 0 auto 15px; border: 4px solid var(--orange); display: flex; 
            align-items: center; justify-content: center; overflow: hidden;
            box-shadow: 0 0 25px rgba(0,0,0,0.3);
        }

        /* LIVE NEWS BAR */
        .news-marquee { 
            background: var(--orange); color: white; padding: 12px 0; 
            font-weight: bold; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* MAIN CONTAINER */
        .container { max-width: 1100px; margin: 0 auto; padding: 0 15px 100px; }

        /* ENTRY FORM BOX */
        .form-card { 
            background: var(--card); border-radius: 20px; padding: 30px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); margin-top: -60px; 
            position: relative; z-index: 100; border: 2px solid var(--blue);
        }
        
        /* GRID SETTINGS */
        .sec-tag { background: var(--dark); color: var(--orange); padding: 12px 35px; border-radius: 50px; display: inline-block; margin: 40px 0 20px; font-weight: 900; border: 2px solid var(--orange); text-transform: uppercase; }
        .grid-services { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; }
        .grid-forms { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .box-card { background: var(--card); padding: 25px 15px; border-radius: 15px; text-align: center; font-weight: bold; border-bottom: 5px solid var(--blue); box-shadow: 0 5px 15px rgba(0,0,0,0.05); color: var(--blue); transition: 0.3s; cursor: default; }

        /* BUTTONS */
        .btn-flex { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 25px; }
        .btn { padding: 12px 20px; border-radius: 30px; color: white; text-decoration: none; font-size: 14px; font-weight: bold; border: none; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .submit-btn { background: linear-gradient(to right, var(--orange), #ff5500); color: white; width: 100%; padding: 18px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1.1em; margin-top: 10px; transition: 0.3s; }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255,123,0,0.4); }

        /* INPUT STYLES */
        input, select, textarea { width: 100%; padding: 15px; margin-bottom: 15px; border-radius: 10px; border: 1px solid #ccc; box-sizing: border-box; background: var(--card); color: var(--txt); font-size: 16px; }

        /* ADMIN PANEL */
        #admin-panel { display: none; background: var(--card); padding: 30px; border: 6px double var(--orange); border-radius: 25px; margin-top: 30px; }
        .admin-sec { background: rgba(0,0,0,0.03); padding: 20px; border-radius: 15px; margin-bottom: 20px; border-left: 6px solid var(--blue); }
        .manage-list { max-height: 250px; overflow-y: auto; background: white; padding: 10px; border-radius: 10px; color: #333; border: 1px solid #ddd; }

        /* MODALS & AI */
        .ai-btn { position: fixed; bottom: 25px; right: 25px; background: var(--orange); width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 30px; cursor: pointer; z-index: 2000; border: 3px solid white; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        #qr-modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; align-items:center; justify-content:center; }
    </style>
</head>
<body data-theme="light">

<header>
    <button onclick="toggleTheme()" style="position:absolute; top:20px; right:20px; background:var(--orange); border:none; color:white; padding:10px; border-radius:50%; cursor:pointer;">üåì</button>
    <div class="logo-circle"><img id="d-logo" src="" style="width:85%;"></div>
    <h1 style="margin:0; font-size: 2.3em;">D.M <span style="color:var(--orange);">CYBER</span> VARANASI</h1>
    <p style="margin:8px 0; opacity: 0.9; font-weight: 500;">Best Digital Center for Online Forms, Pan Card, and CSC Services.</p>
</header>

<div class="news-marquee">
    <marquee id="d-news" scrollamount="6">D.M Cyber Varanasi mein aapka swagat hai...</marquee>
</div>

<div class="container">
    <div class="form-card">
        <div class="btn-flex">
            <a id="d-call" class="btn" style="background:var(--dark);">üìû Call Now</a>
            <a id="d-wa" class="btn" style="background:#25d366;">üí¨ WhatsApp</a>
            <button class="btn" style="background:#6a1b9a;" onclick="toggleQR()">üí≥ Pay Online</button>
            <button class="btn" style="background:#444;" onclick="openAdmin()">‚öôÔ∏è Admin</button>
        </div>

        <h2 style="color:var(--blue); text-align: center; margin-top:0;">üìù ‡§∏‡•á‡§µ‡§æ/‡§´‡•â‡§∞‡•ç‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§≠‡§∞‡•á‡§Ç</h2>
        
        <input type="text" id="c-name" placeholder="‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§ï‡§æ ‡§®‡§æ‡§Æ (Name)">
        <input type="number" id="c-phone" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (Mobile)">
        <input type="text" id="c-work" placeholder="‡§ï‡§æ‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ (‡§ú‡•à‡§∏‡•á: ‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§°)">
        
        <select id="c-mode" onchange="toggleFormFields()">
            <option value="General">‚úÖ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä (Paid)</option>
            <option value="Udhar">üìï ‡§â‡§ß‡§æ‡§∞ ‡§ñ‡§æ‡§§‡§æ (Ledger)</option>
        </select>
        
        <input type="number" id="c-amt" placeholder="‡§ï‡§ø‡§§‡§®‡§æ ‡§â‡§ß‡§æ‡§∞ ‡§¨‡§æ‡§ï‡•Ä ‡§π‡•à? (‚Çπ)" style="display:none; border: 2px solid #ff4444;">
        <textarea id="c-quest" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂ (Optional)" rows="2"></textarea>
        
        <button class="submit-btn" onclick="saveCustomerEntry()">‡§°‡§æ‡§ü‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç & ‡§≠‡•á‡§ú‡•á‡§Ç</button>
    </div>

    <center><div class="sec-tag">‚≠ê Our Services</div></center>
    <div class="grid-services" id="srv-display"></div>

    <center><div class="sec-tag">üìã Active Forms</div></center>
    <div class="grid-forms" id="frm-display"></div>

    <center><div class="sec-tag">üí∞ Rate List</div></center>
    <div id="rate-display" style="background:var(--card); border-radius:15px; padding:15px; border: 1px solid #ddd;"></div>

    <div id="admin-panel">
        <h2 style="text-align:center; color:var(--orange);">üõ† Control Panel</h2>
        <div class="admin-sec">
            <h4>1. Website Profile</h4>
            <input type="text" id="in-logo" placeholder="Logo Link">
            <input type="text" id="in-news" placeholder="News Text">
            <input type="text" id="in-phone" placeholder="Phone Number">
            <input type="text" id="in-upi" placeholder="UPI ID">
            <input type="text" id="in-pin" placeholder="Admin PIN">
        </div>
        <div class="admin-sec">
            <h4>2. Seva/Form List</h4>
            <input type="text" id="in-item-name" placeholder="Name">
            <select id="in-item-type">
                <option value="services">Service</option>
                <option value="forms">Form</option>
            </select>
            <button onclick="addItem()" style="background:green; color:white; border:none; padding:10px; width:100%; border-radius:5px;">Add</button>
            <div class="manage-list" id="list-items" style="margin-top:10px;"></div>
        </div>
        <div class="admin-sec">
            <h4>3. Client Data & Udhar Ledger</h4>
            <div class="manage-list" id="list-data"></div>
        </div>
        <button onclick="saveAll()" style="background:var(--orange); color:white; width:100%; padding:20px; font-weight:bold; border:none; border-radius:10px; cursor:pointer;">üíæ SAVE EVERYTHING</button>
    </div>
</div>

<div class="ai-btn" onclick="toggleAI()">ü§ñ</div>
<div id="qr-modal" onclick="this.style.display='none'">
    <div style="background:white; padding:30px; border-radius:20px; text-align:center;" onclick="event.stopPropagation()">
        <h3>Scan to Pay</h3>
        <div id="qr-img"></div>
        <p id="upi-txt" style="font-weight:bold; color:var(--blue);"></p>
    </div>
</div>

<script>
    const STORAGE = 'dm_master_v300';
    let db = JSON.parse(localStorage.getItem(STORAGE)) || {
        logo: "https://i.postimg.cc/7f7ae7/image.png",
        news: "D.M Cyber Varanasi: Best Digital Center for Online Forms, Pan Card, and CSC Services.",
        phone: "8303585793",
        upi: "dm0827717@ybl",
        pin: "4321",
        services: ["Pan Card", "Aadhar Update", "Income Cert", "Domicile Cert", "Caste Cert"],
        forms: ["UP Police Recruitment", "SSC GD Online", "Scholarship Form"],
        rates: [{n:"Pan Card", p:"200"}, {n:"Income Cert", p:"100"}],
        clients: []
    };

    function toggleFormFields() {
        const mode = document.getElementById('c-mode').value;
        document.getElementById('c-amt').style.display = (mode === 'Udhar') ? 'block' : 'none';
    }

    function render() {
        document.getElementById('d-logo').src = db.logo;
        document.getElementById('d-news').innerText = db.news;
        document.getElementById('d-call').href = "tel:" + db.phone;
        document.getElementById('d-wa').href = "https://wa.me/91" + db.phone;
        
        document.getElementById('srv-display').innerHTML = db.services.map(s => `<div class="box-card">${s}</div>`).join('');
        document.getElementById('frm-display').innerHTML = db.forms.map(f => `<div class="box-card" style="border-left:5px solid var(--orange);">${f}</div>`).join('');
        document.getElementById('rate-display').innerHTML = db.rates.map(r => `<div style="display:flex; justify-content:space-between; padding:12px; border-bottom:1px solid #eee;"><b>${r.n}</b> <span>‚Çπ${r.p}</span></div>`).join('');

        // Pre-fill Admin
        document.getElementById('in-logo').value = db.logo;
        document.getElementById('in-news').value = db.news;
        document.getElementById('in-phone').value = db.phone;
        document.getElementById('in-upi').value = db.upi;
        document.getElementById('in-pin').value = db.pin;

        // Ledger List in Admin
        document.getElementById('list-data').innerHTML = db.clients.map((c,i)=>`
            <div style="padding:10px; border-bottom:1px solid #ddd; background:${c.m==='Udhar'?'#fff0f0':'#f0fff0'}">
                <b>${c.n}</b> (${c.ph})<br>Work: ${c.w} | ${c.m==='Udhar'?'‚ùå Udhar: ‚Çπ'+c.a:'‚úÖ Paid'}
                <button onclick="del('clients',${i})" style="float:right; color:red;">Del</button>
            </div>
        `).reverse().join('');
    }

    function saveCustomerEntry() {
        const name = document.getElementById('c-name').value;
        const phone = document.getElementById('c-phone').value;
        const work = document.getElementById('c-work').value;
        const mode = document.getElementById('c-mode').value;
        const amt = document.getElementById('c-amt').value;

        if(!name || !phone) return;

        db.clients.push({n:name, ph:phone, w:work, m:mode, a:amt, t:new Date().toLocaleString()});
        localStorage.setItem(STORAGE, JSON.stringify(db));
        
        alert("Data Saved Successfully!");
        let waMsg = `*D.M Cyber Varanasi*%0A*Customer:* ${name}%0A*Work:* ${work}%0A*Status:* ${mode === 'Udhar' ? 'Udhar (‚Çπ'+amt+')' : 'Paid'}`;
        window.open(`https://wa.me/91${db.phone}?text=${waMsg}`);
        location.reload();
    }

    function openAdmin() {
        let p = prompt("Admin PIN:");
        if(p === db.pin) document.getElementById('admin-panel').style.display = 'block';
    }

    function toggleTheme() { document.body.dataset.theme = document.body.dataset.theme === 'dark' ? 'light' : 'dark'; }

    function toggleQR() {
        document.getElementById('qr-modal').style.display = 'flex';
        document.getElementById('upi-txt').innerText = db.upi;
        document.getElementById('qr-img').innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=upi://pay?pa=${db.upi}&pn=DMCyber">`;
    }

    function addItem() {
        let n = document.getElementById('in-item-name').value;
        let t = document.getElementById('in-item-type').value;
        if(n) { db[t].push(n); render(); }
    }

    function del(k,i) { db[k].splice(i,1); render(); }

    function saveAll() {
        db.logo = document.getElementById('in-logo').value;
        db.news = document.getElementById('in-news').value;
        db.phone = document.getElementById('in-phone').value;
        db.upi = document.getElementById('in-upi').value;
        db.pin = document.getElementById('in-pin').value;
        localStorage.setItem(STORAGE, JSON.stringify(db));
        location.reload();
    }

    render();
</script>
</body>
</html>
