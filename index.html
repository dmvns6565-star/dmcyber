<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D.M Cyber Varanasi</title>
    
    <!-- ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è Firebase (Global Updates ‡§ï‡•á ‡§≤‡§ø‡§è) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        /* ‡§Ü‡§™‡§ï‡•Ä ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§•‡•Ä‡§Æ ‡§î‡§∞ ‡§ï‡§≤‡§∞‡•ç‡§∏ */
        :root { --primary: #004a99; --accent: #ff9900; --bg: #f4f7f6; --text: #333; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: var(--text); padding-bottom: 80px; }
        
        /* ‡§®‡•ç‡§Ø‡•Ç‡•õ ‡§™‡§ü‡•ç‡§ü‡•Ä (Ticker) */
        .marquee-container { background: red; color: white; overflow: hidden; white-space: nowrap; padding: 8px 0; font-weight: bold; }
        .marquee-content { display: inline-block; animation: scroll 15s linear infinite; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }

        /* ‡§π‡•á‡§°‡§∞ */
        header { background: var(--primary); color: white; padding: 20px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h1 { margin: 0; font-size: 24px; }
        
        /* ‡§≤‡•á‡§Ü‡§â‡§ü (‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§î‡§∞ ‡§™‡•Ä‡§∏‡•Ä ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è) */
        .container { max-width: 1200px; margin: auto; padding: 15px; }
        h2 { border-left: 5px solid var(--accent); padding-left: 10px; color: var(--primary); margin-top: 30px; }
        
        .grid-area { display: grid; gap: 15px; }
        .grid-5 { grid-template-columns: repeat(5, 1fr); } /* ‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø ‡§∏‡•á‡§µ‡§æ - 5 ‡§ï‡•Ä ‡§≤‡§æ‡§á‡§® */
        .grid-3 { grid-template-columns: repeat(3, 1fr); } /* ‡§´‡•â‡§∞‡•ç‡§Æ - 3 ‡§ï‡•Ä ‡§≤‡§æ‡§á‡§® */
        
        /* ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∞‡§ø‡§∏‡•ç‡§™‡•â‡§®‡•ç‡§∏‡§ø‡§µ */
        @media (max-width: 768px) {
            .grid-5 { grid-template-columns: repeat(2, 1fr); }
            .grid-3 { grid-template-columns: 1fr; }
        }

        /* ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡§æ ‡§°‡§ø‡•õ‡§æ‡§á‡§® */
        .card { background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: relative; border-bottom: 3px solid var(--primary); }
        .card h3 { font-size: 16px; margin: 10px 0; }
        .price { color: green; font-weight: bold; font-size: 18px; }
        .desc { font-size: 12px; color: #666; }
        .del-btn { position: absolute; top: -5px; right: -5px; background: red; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; display: none; }

        /* ‡§´‡•ç‡§≤‡•ã‡§ü‡§ø‡§Ç‡§ó ‡§¨‡§ü‡§® (Admin & Chat) */
        .float-btn { position: fixed; bottom: 20px; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; }
        .admin-btn { left: 20px; background: #333; }
        .chat-btn { right: 20px; background: var(--accent); }

        /* AI ‡§ö‡•à‡§ü ‡§¨‡•â‡§ï‡•ç‡§∏ (2.0 Update) */
        .chat-window { position: fixed; bottom: 90px; right: 20px; width: 320px; height: 400px; background: white; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); display: none; flex-direction: column; overflow: hidden; z-index: 999; }
        .chat-header { background: var(--primary); color: white; padding: 10px; display: flex; justify-content: space-between; align-items: center; }
        .chat-body { flex: 1; padding: 10px; overflow-y: auto; background: #f9f9f9; }
        .msg { padding: 8px 12px; margin: 5px 0; border-radius: 15px; font-size: 14px; max-width: 80%; }
        .bot { background: #e0e0e0; align-self: flex-start; border-bottom-left-radius: 0; }
        .user { background: var(--primary); color: white; align-self: flex-end; margin-left: auto; border-bottom-right-radius: 0; }
        .chat-footer { padding: 10px; border-top: 1px solid #ddd; display: flex; }
        .chat-footer input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 20px; outline: none; }
        .chat-footer button { margin-left: 5px; background: var(--accent); border: none; color: white; padding: 8px 15px; border-radius: 50%; cursor: pointer; }

        /* ‡§Æ‡•ã‡§°‡§≤ (Admin Login & Add Item) */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 2000; }
        .modal-content { background: white; padding: 20px; border-radius: 10px; width: 300px; text-align: center; }
        .input-group { margin: 10px 0; }
        .input-group input { width: 90%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
    </style>
</head>
<body>

<!-- ‡§®‡•ç‡§Ø‡•Ç‡•õ ‡§™‡§ü‡•ç‡§ü‡•Ä -->
<div class="marquee-container">
    <div class="marquee-content" id="news-text">D.M Cyber ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</div>
</div>

<header>
    <h1>D.M Cyber Varanasi</h1>
    <p>‡§Ü‡§™‡§ï‡§æ ‡§≠‡§∞‡•ã‡§∏‡•á‡§Æ‡§Ç‡§¶ ‡§ú‡§® ‡§∏‡•á‡§µ‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞</p>
</header>

<div class="container">
    <h2>‚≠ê ‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Å (Live Rates)</h2>
    <div id="services-grid" class="grid-area grid-5">Loading...</div>

    <h2>üìù ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ (New Forms)</h2>
    <div id="forms-grid" class="grid-area grid-3">Loading...</div>
</div>

<!-- ‡§´‡•ç‡§≤‡•ã‡§ü‡§ø‡§Ç‡§ó ‡§¨‡§ü‡§®‡•ç‡§∏ -->
<div class="float-btn admin-btn" onclick="openModal('login-modal')">‚öôÔ∏è</div>
<div class="float-btn chat-btn" onclick="toggleChat()">ü§ñ</div>

<!-- AI ‡§ö‡•à‡§ü ‡§¨‡•â‡§ï‡•ç‡§∏ -->
<div class="chat-window" id="chat-window">
    <div class="chat-header">
        <span>DM Cyber AI 2.0</span>
        <span style="cursor:pointer" onclick="toggleChat()">‚úñ</span>
    </div>
    <div class="chat-body" id="chat-body">
        <div class="msg bot">‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° AI ‡§π‡•Ç‡§Å‡•§ ‡§Ü‡§™ ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Ø‡§æ ‡§∞‡•á‡§ü ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</div>
    </div>
    <div class="chat-footer">
        <input type="text" id="user-input" placeholder="‡§™‡•Ç‡§õ‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: Pan card rate?)" onkeypress="if(event.key==='Enter') sendMessage()">
        <button onclick="sendMessage()">‚û§</button>
    </div>
</div>

<!-- ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•ã‡§°‡§≤ -->
<div id="login-modal" class="modal">
    <div class="modal-content">
        <h3>Admin Login</h3>
        <input type="password" id="pin-input" placeholder="Enter PIN (2525)">
        <br><br>
        <button onclick="login()">Login</button>
        <button onclick="closeModal('login-modal')" style="background:red; color:white; border:none; padding:5px 10px;">Close</button>
    </div>
</div>

<script>
    // ------------------------------------------------------------
    // ‚ö†Ô∏è ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä Firebase Config Key ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç (Global Update ‡§ï‡•á ‡§≤‡§ø‡§è)
    // ------------------------------------------------------------
    const firebaseConfig = {
        // apiKey: "AIzaSy...", 
        // authDomain: "...",
        // databaseURL: "..."
    };
    // ------------------------------------------------------------

    let db;
    let isGlobal = false;
    let data = {
        services: [
            { name: "Pan Card", price: "200" },
            { name: "Aadhaar Print", price: "50" },
            { name: "Income Certificate", price: "100" }
        ],
        forms: [
            { name: "UP Police Constable", desc: "Bharti Open" },
            { name: "SSC GD", desc: "Last Date Soon" }
        ],
        news: "D.M Cyber ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!"
    };
    
    // ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤‡§æ‡§á‡•õ‡•á‡§∂‡§®
    try {
        if (firebaseConfig.apiKey) {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
            isGlobal = true;
            // ‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§≤‡§ø‡§∏‡§®‡§∞ (Live Updates)
            db.ref('dm_data').on('value', (snapshot) => {
                const val = snapshot.val();
                if(val) { data = val; render(); }
            });
        } else {
            // ‡§Ö‡§ó‡§∞ Key ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‡§§‡•ã ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á LocalStorage ‡§∏‡•á ‡§â‡§†‡§æ‡§è‡§ó‡§æ
            const local = localStorage.getItem('dm_local_data');
            if(local) data = JSON.parse(local);
            render();
        }
    } catch(e) { console.log("Offline Mode Active"); }

    let isAdmin = false;

    // --- ‡§∞‡•á‡§Ç‡§°‡§∞ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® (‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ) ---
    function render() {
        document.getElementById('news-text').innerText = data.news;
        
        // ‡§∏‡•á‡§µ‡§æ‡§è‡§Å (Services)
        const sGrid = document.getElementById('services-grid');
        sGrid.innerHTML = '';
        (data.services || []).forEach((item, i) => {
            sGrid.innerHTML += `
                <div class="card">
                    <h3>${item.name}</h3>
                    <div class="price">‚Çπ${item.price}</div>
                    ${isAdmin ? `<button class="del-btn" style="display:block" onclick="remove('services', ${i})">X</button>` : ''}
                </div>`;
        });
        // ‡§Ö‡§ó‡§∞ ‡§è‡§°‡§Æ‡§ø‡§® ‡§π‡•à ‡§§‡•ã + ‡§¨‡§ü‡§® ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ
        if(isAdmin) sGrid.innerHTML += `<div class="card" onclick="addService()" style="background:#eee; cursor:pointer; font-size:40px; color:green; display:flex; align-items:center; justify-content:center;">+</div>`;

        // ‡§´‡•â‡§∞‡•ç‡§Æ (Forms)
        const fGrid = document.getElementById('forms-grid');
        fGrid.innerHTML = '';
        (data.forms || []).forEach((item, i) => {
            fGrid.innerHTML += `
                <div class="card" style="border-bottom-color: var(--accent);">
                    <h3>${item.name}</h3>
                    <div class="desc">${item.desc}</div>
                    ${isAdmin ? `<button class="del-btn" style="display:block" onclick="remove('forms', ${i})">X</button>` : ''}
                </div>`;
        });
        if(isAdmin) fGrid.innerHTML += `<div class="card" onclick="addForm()" style="background:#eee; cursor:pointer; font-size:40px; color:orange; display:flex; align-items:center; justify-content:center;">+</div>`;
    }

    // --- ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ‡§ø‡§Ç‡§ó ---
    function saveData() {
        if(isGlobal) {
            db.ref('dm_data').set(data); // Cloud (‡§∏‡§¨‡§ï‡•á ‡§≤‡§ø‡§è)
        } else {
            localStorage.setItem('dm_local_data', JSON.stringify(data)); // Local (‡§∏‡§ø‡§∞‡•ç‡§´ ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è)
            render();
        }
    }

    // --- ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡•â‡§ú‡§ø‡§ï ---
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    
    function login() {
        if(document.getElementById('pin-input').value === '2525') {
            isAdmin = true;
            closeModal('login-modal');
            
            // ‡§®‡•ç‡§Ø‡•Ç‡•õ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§æ ‡§ë‡§™‡•ç‡§∂‡§®
            if(confirm("Admin Mode ON!
‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ News ‡§™‡§ü‡•ç‡§ü‡•Ä ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) {
                const n = prompt("‡§®‡§à ‡§ñ‡§¨‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç:", data.news);
                if(n) { data.news = n; saveData(); }
            }
            render();
        } else { alert("‡§ó‡§≤‡§§ ‡§™‡§ø‡§®!"); }
    }

    function addService() {
        const name = prompt("‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ (Service Name):");
        const price = prompt("‡§∞‡•á‡§ü (Rate):");
        if(name && price) {
            if(!data.services) data.services = [];
            data.services.push({name, price});
            saveData();
        }
    }

    function addForm() {
        const name = prompt("‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ (Form Name):");
        const desc = prompt("‡§µ‡§ø‡§µ‡§∞‡§£ (Details):");
        if(name) {
            if(!data.forms) data.forms = [];
            data.forms.push({name, desc: desc || "Available"});
            saveData();
        }
    }

    function remove(type, index) {
        if(confirm("‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) {
            data[type].splice(index, 1);
            saveData();
        }
    }

    // --- AI 2.0 (Intelligent Logic) ---
    function toggleChat() {
        const w = document.getElementById('chat-window');
        w.style.display = w.style.display === 'flex' ? 'none' : 'flex';
    }

    function sendMessage() {
        const input = document.getElementById('user-input');
        const txt = input.value.toLowerCase().trim();
        if(!txt) return;

        // ‡§Ø‡•Ç‡§ú‡§º‡§∞ ‡§Æ‡•à‡§∏‡•á‡§ú ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
        const body = document.getElementById('chat-body');
        body.innerHTML += `<div class="msg user">${input.value}</div>`;
        input.value = '';

        // AI ‡§∏‡•ã‡§ö‡•á‡§ó‡§æ (Smart Logic)
        let reply = "‡§Æ‡§æ‡•û ‡§ï‡•Ä‡§ú‡§ø‡§Ø‡•á, ‡§Æ‡•Å‡§ù‡•á ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ‡•§ ‡§¶‡•Å‡§ï‡§æ‡§® ‡§™‡§∞ ‡§Ü‡§è‡§Ç‡•§";
        
        // 1. ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∂‡§¨‡•ç‡§¶ ‡§∏‡•Å‡§ß‡§æ‡§∞ (Typo Correction Dictionary)
        let query = txt.replace('pen', 'pan').replace('adhar', 'aadhaar').replace('adhaar', 'aadhaar').replace('jati', 'caste').replace('niwas', 'residence');

        // 2. ‡§≤‡§æ‡§á‡§µ ‡§°‡•á‡§ü‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§∞‡•ç‡§ö (Dynamic Search)
        // ‡§Ø‡§π ‡§Ü‡§™‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡•Ä ‡§ó‡§à ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§¢‡•Ç‡§Ç‡§¢‡•á‡§ó‡§æ
        let foundService = (data.services || []).find(s => query.includes(s.name.toLowerCase()));
        let foundForm = (data.forms || []).find(f => query.includes(f.name.toLowerCase()));

        if (foundService) {
            reply = `‚úÖ ${foundService.name} ‡§ï‡§æ ‡§Ö‡§≠‡•Ä ‡§ï‡§æ ‡§∞‡•á‡§ü ‚Çπ${foundService.price} ‡§π‡•à‡•§`;
        } else if (foundForm) {
            reply = `üìÑ ‡§π‡§æ‡§Å, ${foundForm.name} ‡§≠‡§∞‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä: ${foundForm.desc}`;
        } else if (query.includes('time') || query.includes('kab') || query.includes('khula')) {
            reply = "‚è∞ ‡§¶‡•Å‡§ï‡§æ‡§® ‡§∏‡•Å‡§¨‡§π 10 ‡§¨‡§ú‡•á ‡§∏‡•á ‡§∞‡§æ‡§§ 8 ‡§¨‡§ú‡•á ‡§§‡§ï ‡§ñ‡•Å‡§≤‡•Ä ‡§π‡•à‡•§";
        } else if (query.includes('hello') || query.includes('hi')) {
            reply = "üëã ‡§®‡§Æ‡§∏‡•ç‡§§‡•á! D.M Cyber ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à‡•§ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Ø‡§æ ‡§∞‡•á‡§ü ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§";
        }

        // AI ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§≠‡•á‡§ú‡•á‡§Ç
        setTimeout(() => {
            body.innerHTML += `<div class="msg bot">${reply}</div>`;
            body.scrollTop = body.scrollHeight;
        }, 600);
    }

    // ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§∞‡•á‡§Ç‡§°‡§∞
    render();
</script>

</body>
</html>
